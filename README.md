# All-in-RAG | å¤§æ¨¡å‹åº”ç”¨å¼€å‘å®æˆ˜ï¼šRAGæŠ€æœ¯å…¨æ ˆæŒ‡å—

<div align='center'>
  <img src="./logo.svg" alt="All-in-RAG Logo" width="70%">
</div>

## é¡¹ç›®ç®€ä»‹ [![Stars](https://img.shields.io/github/stars/datawhalechina/all-in-rag?style=social)](https://github.com/datawhalechina/all-in-rag/stargazers) ![GitHub forks](https://img.shields.io/github/forks/datawhalechina/all-in-rag) [![Python](https://img.shields.io/badge/Python-3.12.7-blue)](https://www.python.org/) [![Online Reading](https://img.shields.io/badge/Online%20Reading-Click%20Here-blue)](https://github.com/datawhalechina/all-in-rag)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé¢å‘å¤§æ¨¡å‹åº”ç”¨å¼€å‘è€…çš„RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯å…¨æ ˆæ•™ç¨‹ï¼Œæ—¨åœ¨é€šè¿‡ä½“ç³»åŒ–çš„å­¦ä¹ è·¯å¾„å’ŒåŠ¨æ‰‹å®è·µé¡¹ç›®ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„RAGåº”ç”¨å¼€å‘æŠ€èƒ½ï¼Œæ„å»ºç”Ÿäº§çº§çš„æ™ºèƒ½é—®ç­”å’ŒçŸ¥è¯†æ£€ç´¢ç³»ç»Ÿã€‚

**ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š**

1. **RAGæŠ€æœ¯åŸºç¡€**ï¼šæ·±å…¥æµ…å‡ºåœ°ä»‹ç»RAGçš„æ ¸å¿ƒæ¦‚å¿µã€æŠ€æœ¯åŸç†å’Œåº”ç”¨åœºæ™¯
2. **æ•°æ®å¤„ç†å…¨æµç¨‹**ï¼šä»æ•°æ®åŠ è½½ã€æ¸…æ´—åˆ°æ–‡æœ¬åˆ†å—çš„å®Œæ•´æ•°æ®å‡†å¤‡æµç¨‹
3. **ç´¢å¼•æ„å»ºä¸ä¼˜åŒ–**ï¼šå‘é‡åµŒå…¥ã€å¤šæ¨¡æ€åµŒå…¥ã€å‘é‡æ•°æ®åº“æ„å»ºåŠç´¢å¼•ä¼˜åŒ–æŠ€æœ¯
4. **æ£€ç´¢æŠ€æœ¯è¿›é˜¶**ï¼šæ··åˆæ£€ç´¢ã€æŸ¥è¯¢æ„å»ºã€Text2SQLç­‰é«˜çº§æ£€ç´¢æŠ€æœ¯
5. **ç”Ÿæˆé›†æˆä¸è¯„ä¼°**ï¼šæ ¼å¼åŒ–ç”Ÿæˆã€ç³»ç»Ÿè¯„ä¼°ä¸ä¼˜åŒ–æ–¹æ³•
6. **é¡¹ç›®å®æˆ˜**ï¼šä»åŸºç¡€åˆ°è¿›é˜¶çš„å®Œæ•´RAGåº”ç”¨å¼€å‘å®è·µ

## é¡¹ç›®æ„ä¹‰

éšç€å¤§è¯­è¨€æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼ŒRAGæŠ€æœ¯å·²æˆä¸ºæ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿã€çŸ¥è¯†æ£€ç´¢åº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ã€‚ç„¶è€Œï¼Œç°æœ‰çš„RAGæ•™ç¨‹å¾€å¾€é›¶æ•£ä¸”ç¼ºä¹ç³»ç»Ÿæ€§ï¼Œåˆå­¦è€…éš¾ä»¥å½¢æˆå®Œæ•´çš„æŠ€æœ¯ä½“ç³»è®¤çŸ¥ã€‚

æœ¬é¡¹ç›®ä»å®è·µå‡ºå‘ï¼Œç»“åˆæœ€æ–°çš„RAGæŠ€æœ¯å‘å±•è¶‹åŠ¿ï¼Œæ„å»ºäº†ä¸€å¥—å®Œæ•´çš„RAGå­¦ä¹ ä½“ç³»ï¼Œå¸®åŠ©å¼€å‘è€…ï¼š
- ç³»ç»ŸæŒæ¡RAGæŠ€æœ¯çš„ç†è®ºåŸºç¡€å’Œå®è·µæŠ€èƒ½
- ç†è§£RAGç³»ç»Ÿçš„å®Œæ•´æ¶æ„å’Œå„ç»„ä»¶çš„ä½œç”¨
- å…·å¤‡ç‹¬ç«‹å¼€å‘RAGåº”ç”¨çš„èƒ½åŠ›
- æŒæ¡RAGç³»ç»Ÿçš„è¯„ä¼°å’Œä¼˜åŒ–æ–¹æ³•

## é¡¹ç›®å—ä¼—

**æœ¬é¡¹ç›®é€‚åˆä»¥ä¸‹äººç¾¤å­¦ä¹ ï¼š**
- å…·å¤‡Pythonç¼–ç¨‹åŸºç¡€ï¼Œå¯¹RAGæŠ€æœ¯æ„Ÿå…´è¶£çš„å¼€å‘è€…
- å¸Œæœ›ç³»ç»Ÿå­¦ä¹ RAGæŠ€æœ¯çš„AIå·¥ç¨‹å¸ˆ
- æƒ³è¦æ„å»ºæ™ºèƒ½é—®ç­”ç³»ç»Ÿçš„äº§å“å¼€å‘è€…
- å¯¹æ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯æœ‰å­¦ä¹ éœ€æ±‚çš„ç ”ç©¶äººå‘˜

**å‰ç½®è¦æ±‚ï¼š**
- æŒæ¡PythonåŸºç¡€è¯­æ³•å’Œå¸¸ç”¨åº“çš„ä½¿ç”¨
- èƒ½å¤Ÿç®€å•ä½¿ç”¨docker
- äº†è§£åŸºæœ¬çš„LLMæ¦‚å¿µï¼ˆæ¨èä½†éå¿…éœ€ï¼‰
- å…·å¤‡åŸºç¡€çš„Linuxå‘½ä»¤è¡Œæ“ä½œèƒ½åŠ›

## é¡¹ç›®äº®ç‚¹

1. **ä½“ç³»åŒ–å­¦ä¹ è·¯å¾„**ï¼šä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œæ„å»ºå®Œæ•´çš„RAGæŠ€æœ¯å­¦ä¹ ä½“ç³»
2. **ç†è®ºä¸å®è·µå¹¶é‡**ï¼šæ¯ä¸ªç« èŠ‚éƒ½åŒ…å«ç†è®ºè®²è§£å’Œä»£ç å®è·µï¼Œç¡®ä¿å­¦ä»¥è‡´ç”¨
3. **å¤šæ¨¡æ€æ”¯æŒ**ï¼šä¸ä»…æ¶µç›–æ–‡æœ¬RAGï¼Œè¿˜åŒ…æ‹¬å¤šæ¨¡æ€åµŒå…¥å’Œæ£€ç´¢æŠ€æœ¯
4. **å·¥ç¨‹åŒ–å¯¼å‘**ï¼šæ³¨é‡å®é™…åº”ç”¨ä¸­çš„å·¥ç¨‹åŒ–é—®é¢˜ï¼ŒåŒ…æ‹¬æ€§èƒ½ä¼˜åŒ–ã€ç³»ç»Ÿè¯„ä¼°ç­‰
5. **ä¸°å¯Œçš„å®æˆ˜é¡¹ç›®**ï¼šæä¾›ä»åŸºç¡€åˆ°è¿›é˜¶çš„å¤šä¸ªå®æˆ˜é¡¹ç›®ï¼Œå¸®åŠ©å·©å›ºå­¦ä¹ æˆæœ

## å†…å®¹å¤§çº²

### ç¬¬ä¸€éƒ¨åˆ†ï¼šRAGåŸºç¡€å…¥é—¨

**ç¬¬ä¸€ç«  è§£é”RAG** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter1)
1. [x] [RAGç®€ä»‹](./docs/chapter1/01_RAG_intro.md) - RAGæŠ€æœ¯æ¦‚è¿°ä¸åº”ç”¨åœºæ™¯
2. [x] [å‡†å¤‡å·¥ä½œ](./docs/chapter1/02_preparation.md) - ç¯å¢ƒé…ç½®ä¸å‡†å¤‡
3. [x] [å››æ­¥æ„å»ºRAG](./docs/chapter1/03_get_start_rag.md) - å¿«é€Ÿä¸Šæ‰‹RAGå¼€å‘

**ç¬¬äºŒç«  æ•°æ®å‡†å¤‡** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter2)
1. [x] [æ•°æ®åŠ è½½](./docs/chapter2/04_data_load.md) - å¤šæ ¼å¼æ–‡æ¡£å¤„ç†ä¸åŠ è½½
2. [x] [æ–‡æœ¬åˆ†å—](./docs/chapter2/05_text_chunking.md) - æ–‡æœ¬åˆ‡åˆ†ç­–ç•¥ä¸ä¼˜åŒ–

### ç¬¬äºŒéƒ¨åˆ†ï¼šç´¢å¼•æ„å»ºä¸ä¼˜åŒ–

**ç¬¬ä¸‰ç«  ç´¢å¼•æ„å»º** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter3)
1. [x] [å‘é‡åµŒå…¥](./docs/chapter3/06_vector_embedding.md) - æ–‡æœ¬å‘é‡åŒ–æŠ€æœ¯è¯¦è§£
2. [x] [å¤šæ¨¡æ€åµŒå…¥](./docs/chapter3/07_multimodal_embedding.md) - å›¾æ–‡å¤šæ¨¡æ€å‘é‡åŒ–
3. [x] [å‘é‡æ•°æ®åº“](./docs/chapter3/08_vector_db.md) - å‘é‡å­˜å‚¨ä¸æ£€ç´¢ç³»ç»Ÿ
4. [x] [Milvuså®è·µ](./docs/chapter3/09_milvus.md) - Milvuså¤šæ¨¡æ€æ£€ç´¢å®æˆ˜
5. [x] [ç´¢å¼•ä¼˜åŒ–](./docs/chapter3/10_index_optimization.md) - ç´¢å¼•æ€§èƒ½è°ƒä¼˜æŠ€å·§

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ£€ç´¢æŠ€æœ¯è¿›é˜¶

**ç¬¬å››ç«  æ£€ç´¢ä¼˜åŒ–** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter4)
1. [x] [æ··åˆæ£€ç´¢](./docs/chapter4/11_hybrid_search.md) - ç¨ å¯†+ç¨€ç–æ£€ç´¢èåˆ
2. [x] [æŸ¥è¯¢æ„å»º](./docs/chapter4/12_query_construction.md) - æ™ºèƒ½æŸ¥è¯¢ç†è§£ä¸æ„å»º
3. [x] [Text2SQL](./docs/chapter4/13_text2sql.md) - è‡ªç„¶è¯­è¨€è½¬SQLæŸ¥è¯¢
4. [x] [æŸ¥è¯¢é‡æ„ä¸åˆ†å‘](./docs/chapter4/14_query_rewriting.md) - æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥
5. [x] [æ£€ç´¢è¿›é˜¶æŠ€æœ¯](./docs/chapter4/15_advanced_retrieval_techniques.md) - é«˜çº§æ£€ç´¢ç®—æ³•

### ç¬¬å››éƒ¨åˆ†ï¼šç”Ÿæˆä¸è¯„ä¼°

**ç¬¬äº”ç«  ç”Ÿæˆé›†æˆ** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter5)
1. [x] [æ ¼å¼åŒ–ç”Ÿæˆ](./docs/chapter5/16_formatted_generation.md) - ç»“æ„åŒ–è¾“å‡ºä¸æ ¼å¼æ§åˆ¶

**ç¬¬å…­ç«  RAGç³»ç»Ÿè¯„ä¼°** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter6)
1. [x] [è¯„ä¼°ä»‹ç»](./docs/chapter6/18_system_evaluation.md) - RAGç³»ç»Ÿè¯„ä¼°æ–¹æ³•è®º
2. [x] [è¯„ä¼°å·¥å…·](./docs/chapter6/19_common_tools.md) - å¸¸ç”¨è¯„ä¼°å·¥å…·ä¸æŒ‡æ ‡

### ç¬¬äº”éƒ¨åˆ†ï¼šé«˜çº§åº”ç”¨ä¸å®æˆ˜

**ç¬¬ä¸ƒç«  é«˜çº§RAGæ¶æ„ï¼ˆæ‹“å±•é€‰ä¿®ç¯‡ï¼‰** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter7)

1. [x] [åŸºäºçŸ¥è¯†å›¾è°±çš„RAG](./docs/chapter7/20_kg_rag.md)

**ç¬¬å…«ç«  é¡¹ç›®å®æˆ˜ä¸€ï¼ˆåŸºç¡€ç¯‡ï¼‰** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter8)
1. [x] [ç¯å¢ƒé…ç½®ä¸é¡¹ç›®æ¶æ„](./docs/chapter8/01_env_architecture.md)
2. [x] [æ•°æ®å‡†å¤‡æ¨¡å—å®ç°](./docs/chapter8/02_data_preparation.md)
3. [x] [ç´¢å¼•æ„å»ºä¸æ£€ç´¢ä¼˜åŒ–](./docs/chapter8/03_index_retrieval.md)
4. [x] [ç”Ÿæˆé›†æˆä¸ç³»ç»Ÿæ•´åˆ](./docs/chapter8/04_generation_sys.md)

**ç¬¬ä¹ç«  é¡¹ç›®å®æˆ˜ä¸€ä¼˜åŒ–ï¼ˆé€‰ä¿®ç¯‡ï¼‰** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter9)

[ğŸ½ï¸ é¡¹ç›®å±•ç¤º](https://github.com/FutureUnreal/What-to-eat-today)
1. [x] [å›¾RAGæ¶æ„è®¾è®¡](./docs/chapter9/01_graph_rag_architecture.md)
2. [x] [å›¾æ•°æ®å»ºæ¨¡ä¸å‡†å¤‡](./docs/chapter9/02_graph_data_modeling.md)
3. [x] [Milvusç´¢å¼•æ„å»º](./docs/chapter9/03_index_construction.md)
4. [x] [æ™ºèƒ½æŸ¥è¯¢è·¯ç”±ä¸æ£€ç´¢ç­–ç•¥](./docs/chapter9/04_intelligent_query_routing.md)

**ç¬¬åç«  é¡¹ç›®å®æˆ˜äºŒï¼ˆé€‰ä¿®ç¯‡ï¼‰** [ğŸ“– æŸ¥çœ‹ç« èŠ‚](./docs/chapter10) *è§„åˆ’ä¸­*

## ç›®å½•ç»“æ„è¯´æ˜

```
all-in-rag/
â”œâ”€â”€ docs/           # æ•™ç¨‹æ–‡æ¡£
â”œâ”€â”€ code/           # ä»£ç ç¤ºä¾‹
â”œâ”€â”€ data/           # ç¤ºä¾‹æ•°æ®
â”œâ”€â”€ models/         # é¢„è®­ç»ƒæ¨¡å‹
â””â”€â”€ README.md       # é¡¹ç›®è¯´æ˜
```

## å®æˆ˜é¡¹ç›®å±•ç¤º

### ç¬¬å…«ç«  é¡¹ç›®ä¸€ï¼š

![é¡¹ç›®ä¸€](./project01.png)

### ç¬¬ä¹ç«  é¡¹ç›®ä¸€ï¼ˆGraph RAGä¼˜åŒ–ï¼‰ï¼š

![é¡¹ç›®ä¸€ï¼ˆGraph RAGä¼˜åŒ–ï¼‰](./project01_graph.png)

### ç¬¬åç«  é¡¹ç›®äºŒï¼š

## è‡´è°¢

**æ ¸å¿ƒè´¡çŒ®è€…**
- [å°¹å¤§å•-é¡¹ç›®è´Ÿè´£äºº](https://github.com/FutureUnreal)ï¼ˆé¡¹ç›®å‘èµ·äººä¸ä¸»è¦è´¡çŒ®è€…ï¼‰

### ç‰¹åˆ«æ„Ÿè°¢
- æ„Ÿè°¢ [@Sm1les](https://github.com/Sm1les) å¯¹æœ¬é¡¹ç›®çš„å¸®åŠ©ä¸æ”¯æŒ
- æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ä»¬
- æ„Ÿè°¢å¼€æºç¤¾åŒºæä¾›çš„ä¼˜ç§€å·¥å…·å’Œæ¡†æ¶æ”¯æŒ
- ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹ä¸ºæ•™ç¨‹åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

[![Contributors](https://contrib.rocks/image?repo=datawhalechina/all-in-rag)](https://github.com/datawhalechina/all-in-rag/graphs/contributors)

*Made with [contrib.rocks](https://contrib.rocks).*

## å‚ä¸è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- ğŸš¨ **BugæŠ¥å‘Š**ï¼šå‘ç°é—®é¢˜è¯·æäº¤ [Issue](https://github.com/datawhalechina/all-in-rag/issues)
- ğŸ’­ **åŠŸèƒ½å»ºè®®**ï¼šæœ‰å¥½çš„æƒ³æ³•æ¬¢è¿åœ¨ [Discussions](https://github.com/datawhalechina/all-in-rag/discussions) ä¸­è®¨è®º
- ğŸ“š **æ–‡æ¡£æ”¹è¿›**ï¼šå¸®åŠ©å®Œå–„æ–‡æ¡£å†…å®¹å’Œç¤ºä¾‹ä»£ç 
- âš¡ **ä»£ç è´¡çŒ®**ï¼šæäº¤ [Pull Request](https://github.com/datawhalechina/all-in-rag/pulls) æ”¹è¿›é¡¹ç›®

### è´¡çŒ®æŒ‡å—
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=datawhalechina/all-in-rag&type=Date)](https://star-history.com/#datawhalechina/all-in-rag&Date)

<div align="center">
  <p>å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸</p>
  <p>è®©æ›´å¤šäººå‘ç°è¿™ä¸ªé¡¹ç›®ï¼ˆæŠ¤é£Ÿï¼Ÿå‘æ¥ï¼ï¼‰</p>
</div>

## å…³äº Datawhale

<div align='center'>
    <img src="https://raw.githubusercontent.com/datawhalechina/pumpkin-book/master/res/qrcode.jpeg" alt="Datawhale" width="30%">
    <p>æ‰«æäºŒç»´ç å…³æ³¨ Datawhale å…¬ä¼—å·ï¼Œè·å–æ›´å¤šä¼˜è´¨å¼€æºå†…å®¹</p>
</div>

---

## è®¸å¯è¯

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®" style="border-width:0" src="https://img.shields.io/badge/license-CC%20BY--NC--SA%204.0-lightgrey" /></a>

æœ¬ä½œå“é‡‡ç”¨ [çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-nc-sa/4.0/) è¿›è¡Œè®¸å¯ã€‚

---
