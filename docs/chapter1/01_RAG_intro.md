# ç¬¬ä¸€èŠ‚ RAGç®€ä»‹

## ä¸€ã€ä»€ä¹ˆæ˜¯RAGï¼Ÿ

### 1.1 æ ¸å¿ƒå®šä¹‰

RAGï¼ˆRetrieval-Augmented Generationï¼‰æ˜¯ä¸€ç§**èåˆä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬ç”Ÿæˆ**çš„æŠ€æœ¯èŒƒå¼ã€‚å…¶æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šåœ¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç”Ÿæˆæ–‡æœ¬å‰ï¼Œå…ˆé€šè¿‡æ£€ç´¢æœºåˆ¶ä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­åŠ¨æ€è·å–ç›¸å…³ä¿¡æ¯ï¼Œå¹¶å°†æ£€ç´¢ç»“æœèå…¥ç”Ÿæˆè¿‡ç¨‹ï¼Œä»è€Œæå‡è¾“å‡ºçš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§[^1][^2][^3]ã€‚

> å½“ç„¶RAGçš„å®šä¹‰ä¼šéšç€æŠ€æœ¯çš„å‘å±•è€Œæ‹“å±•ï¼Œæ‰€ä»¥å½“å‰å®šä¹‰ä»…ä½œä¸ºåŸºæœ¬æ¡†æ¶çš„ç¡®ç«‹ã€‚

ğŸ’¡ **RAGæœ¬è´¨**ï¼šåœ¨LLMç”Ÿæˆæ–‡æœ¬ä¹‹å‰ï¼Œå…ˆä»**å¤–éƒ¨çŸ¥è¯†åº“**ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œä½œä¸ºä¸Šä¸‹æ–‡è¾…åŠ©ç”Ÿæˆæ›´å‡†ç¡®çš„å›ç­”ã€‚

### 1.2 æŠ€æœ¯åŸç†

- **åŒé˜¶æ®µæ¶æ„**ï¼š  
![åŒé˜¶æ®µ](./images/1_1.svg)

- **å…³é”®ç»„ä»¶**ï¼š
  1. **ç´¢å¼•ï¼ˆIndexingï¼‰** ğŸ“‘ï¼šå°†éç»“æ„åŒ–æ–‡æ¡£ï¼ˆPDF/Wordç­‰ï¼‰åˆ†å‰²ä¸ºç‰‡æ®µï¼Œé€šè¿‡åµŒå…¥æ¨¡å‹è½¬æ¢ä¸ºå‘é‡æ•°æ®ã€‚
  2. **æ£€ç´¢ï¼ˆRetrievalï¼‰** ğŸ”ï¸ï¼šåŸºäºæŸ¥è¯¢è¯­ä¹‰ï¼Œä»å‘é‡æ•°æ®åº“å¬å›æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µï¼ˆContextï¼‰ã€‚
  3. **ç”Ÿæˆï¼ˆGenerationï¼‰** âœ¨ï¼šå°†æ£€ç´¢ç»“æœä½œä¸ºä¸Šä¸‹æ–‡è¾“å…¥LLMï¼Œç”Ÿæˆè‡ªç„¶è¯­è¨€å“åº”ã€‚

### 1.3 æŠ€æœ¯æ¼”è¿›åˆ†ç±»

RAGæŠ€æœ¯æŒ‰ç…§å¤æ‚åº¦å¯åˆ’åˆ†ä¸º[^4]ï¼š

**åˆçº§RAG**
- åŸºç¡€"ç´¢å¼•-æ£€ç´¢-ç”Ÿæˆ"æµç¨‹
- ç®€å•æ–‡æ¡£åˆ†å—
- åŸºæœ¬å‘é‡æ£€ç´¢æœºåˆ¶

**é«˜çº§RAG**
- å¢åŠ æ•°æ®æ¸…æ´—æµç¨‹
- å…ƒæ•°æ®ä¼˜åŒ–
- å¤šè½®æ£€ç´¢ç­–ç•¥
- æå‡å‡†ç¡®æ€§å’Œæ•ˆç‡

**æ¨¡å—åŒ–RAG**
- çµæ´»é›†æˆæœç´¢å¼•æ“
- å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–
- çŸ¥è¯†å›¾è°±å¢å¼º
- æ”¯æŒå¤æ‚ä¸šåŠ¡åœºæ™¯

![åˆ†ç±»å›¾](./images/1_2.webp)

## äºŒã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨RAG[^5]ï¼Ÿ

### 2.1 è§£å†³LLMçš„æ ¸å¿ƒå±€é™ 

| é—®é¢˜ | RAGçš„è§£å†³æ–¹æ¡ˆ |
|---------------------|----------------------------------|
| **é™æ€çŸ¥è¯†å±€é™** | å®æ—¶æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–° |
| **å¹»è§‰ï¼ˆHallucinationï¼‰** | åŸºäºæ£€ç´¢å†…å®¹ç”Ÿæˆï¼Œé”™è¯¯ç‡é™ä½ |
| **é¢†åŸŸä¸“ä¸šæ€§ä¸è¶³** | å¼•å…¥é¢†åŸŸç‰¹å®šçŸ¥è¯†åº“ï¼ˆå¦‚åŒ»ç–—/æ³•å¾‹ï¼‰ |
| **æ•°æ®éšç§é£é™©** | æœ¬åœ°åŒ–éƒ¨ç½²çŸ¥è¯†åº“ï¼Œé¿å…æ•æ„Ÿæ•°æ®æ³„éœ² |

### 2.2 å…³é”®ä¼˜åŠ¿ 

1. **å‡†ç¡®æ€§æå‡**
- çŸ¥è¯†åŸºç¡€æ‰©å±•ï¼šè¡¥å……LLMé¢„è®­ç»ƒçŸ¥è¯†çš„ä¸è¶³ï¼Œå¢å¼ºå¯¹ä¸“ä¸šé¢†åŸŸçš„ç†è§£
- é™ä½å¹»è§‰ç°è±¡ï¼šé€šè¿‡æä¾›å…·ä½“å‚è€ƒææ–™ï¼Œå‡å°‘æ— ä¸­ç”Ÿæœ‰çš„æƒ…å†µ
- å¯æº¯æºå¼•ç”¨ï¼šæ”¯æŒå¼•ç”¨åŸå§‹æ–‡æ¡£ï¼Œæé«˜è¾“å‡ºå†…å®¹çš„å¯ä¿¡åº¦å’Œè¯´æœåŠ›

2. **å®æ—¶æ€§ä¿éšœ**
- åŠ¨æ€çŸ¥è¯†æ›´æ–°ï¼šçŸ¥è¯†åº“å†…å®¹å¯ä»¥ç‹¬ç«‹äºæ¨¡å‹è¿›è¡Œå®æ—¶æ›´æ–°å’Œç»´æŠ¤
- å‡å°‘æ—¶æ»æ€§ï¼šè§„é¿LLMé¢„è®­ç»ƒæ•°æ®æˆªæ­¢æ—¥æœŸå¸¦æ¥çš„çŸ¥è¯†æ—¶æ•ˆæ€§é—®é¢˜

3. **æˆæœ¬æ•ˆç›Š**
- é¿å…é¢‘ç¹å¾®è°ƒï¼šç›¸æ¯”åå¤å¾®è°ƒLLMï¼Œç»´æŠ¤çŸ¥è¯†åº“æˆæœ¬æ›´ä½
- é™ä½æ¨ç†æˆæœ¬ï¼šé’ˆå¯¹ç‰¹å®šé¢†åŸŸé—®é¢˜ï¼Œå¯ä½¿ç”¨æ›´å°çš„åŸºç¡€æ¨¡å‹é…åˆçŸ¥è¯†åº“
- èµ„æºæ¶ˆè€—ä¼˜åŒ–ï¼šå‡å°‘å­˜å‚¨å®Œæ•´çŸ¥è¯†åœ¨æ¨¡å‹æƒé‡ä¸­çš„è®¡ç®—èµ„æºéœ€æ±‚
- å¿«é€Ÿé€‚åº”å˜åŒ–ï¼šæ–°ä¿¡æ¯æˆ–æ”¿ç­–æ›´æ–°åªéœ€æ›´æ–°çŸ¥è¯†åº“ï¼Œæ— éœ€é‡è®­ç»ƒæ¨¡å‹

4. **å¯æ‰©å±•æ€§**
- å¤šæºé›†æˆï¼šæ”¯æŒä»ä¸åŒæ¥æºå’Œæ ¼å¼çš„æ•°æ®ä¸­æ„å»ºç»Ÿä¸€çŸ¥è¯†åº“
- æ¨¡å—åŒ–è®¾è®¡ï¼šæ£€ç´¢ç»„ä»¶å¯ç‹¬ç«‹ä¼˜åŒ–ï¼Œä¸å½±å“ç”Ÿæˆç»„ä»¶

### 2.3 é€‚ç”¨åœºæ™¯é£é™©åˆ†çº§ 

> ä»¥ä¸‹æ˜¯RAGæŠ€æœ¯åœ¨ä¸åŒé£é™©ç­‰çº§åœºæ™¯ä¸­çš„é€‚ç”¨æ€§

| é£é™©ç­‰çº§ | æ¡ˆä¾‹ | RAGé€‚ç”¨æ€§ |
|:--------:|:------------------------------|:--------------------------:|
| **ä½é£é™©** | ç¿»è¯‘/è¯­æ³•æ£€æŸ¥ | é«˜å¯é æ€§ |
| **ä¸­é£é™©** | åˆåŒèµ·è‰/æ³•å¾‹å’¨è¯¢ | éœ€ç»“åˆäººå·¥å®¡æ ¸ |
| **é«˜é£é™©** | è¯æ®åˆ†æ/ç­¾è¯å†³ç­– | éœ€ä¸¥æ ¼è´¨é‡æ§åˆ¶æœºåˆ¶ |

## ä¸‰ã€å¦‚ä½•ä¸Šæ‰‹RAGï¼Ÿ

### 3.1 åŸºç¡€å·¥å…·é“¾é€‰æ‹©

**å¼€å‘æ¡†æ¶**
- **LangChain**ï¼šæä¾›é¢„ç½®RAGé“¾ï¼ˆå¦‚rag_chainï¼‰ï¼Œæ”¯æŒå¿«é€Ÿé›†æˆLLMä¸å‘é‡åº“
- **LlamaIndex**ï¼šä¸“ä¸ºçŸ¥è¯†åº“ç´¢å¼•ä¼˜åŒ–ï¼Œç®€åŒ–æ–‡æ¡£åˆ†å—ä¸åµŒå…¥æµç¨‹

**å‘é‡æ•°æ®åº“**
- **Milvus**ï¼šå¼€æºé«˜æ€§èƒ½å‘é‡æ•°æ®åº“
- **FAISS**ï¼šè½»é‡çº§å‘é‡æœç´¢åº“
- **Pinecone**ï¼šäº‘æœåŠ¡å‘é‡æ•°æ®åº“

### 3.2 å››æ­¥æ„å»ºæœ€å°å¯è¡Œç³»ç»Ÿï¼ˆMVPï¼‰

1. **æ•°æ®å‡†å¤‡**
   - æ ¼å¼æ”¯æŒï¼šPDFã€Wordã€ç½‘é¡µæ–‡æœ¬ç­‰
   - åˆ†å—ç­–ç•¥ï¼šæŒ‰è¯­ä¹‰ï¼ˆå¦‚æ®µè½ï¼‰æˆ–å›ºå®šé•¿åº¦åˆ‡åˆ†ï¼Œé¿å…ä¿¡æ¯ç¢ç‰‡åŒ–

2. **ç´¢å¼•æ„å»º**
   - åµŒå…¥æ¨¡å‹ï¼šé€‰å–å¼€æºæ¨¡å‹ï¼ˆå¦‚text-embedding-ada-002ï¼‰æˆ–å¾®è°ƒé¢†åŸŸä¸“ç”¨æ¨¡å‹
   - å‘é‡åŒ–ï¼šå°†æ–‡æœ¬åˆ†å—è½¬æ¢ä¸ºå‘é‡å­˜å…¥æ•°æ®åº“

3. **æ£€ç´¢ä¼˜åŒ–**
   - æ··åˆæ£€ç´¢ï¼šç»“åˆå…³é”®è¯ï¼ˆBM25ï¼‰ä¸è¯­ä¹‰æœç´¢ï¼ˆå‘é‡ç›¸ä¼¼åº¦ï¼‰æå‡å¬å›ç‡
   - é‡æ’åºï¼ˆRerankï¼‰ï¼šç”¨å°æ¨¡å‹ç­›é€‰Top-Kç›¸å…³ç‰‡æ®µï¼ˆå¦‚Cohere Rerankerï¼‰

4. **ç”Ÿæˆé›†æˆ**
   - æç¤ºå·¥ç¨‹ï¼šè®¾è®¡æ¨¡æ¿å¼•å¯¼LLMèåˆæ£€ç´¢å†…å®¹
   - LLMé€‰å‹ï¼šGPTã€Claudeã€Ollamaç­‰ï¼ˆæŒ‰æˆæœ¬/æ€§èƒ½æƒè¡¡ï¼‰

### 3.3 æ–°æ‰‹å‹å¥½æ–¹æ¡ˆ

- **LangChain4j Easy RAG**ï¼šä»…éœ€ä¸Šä¼ æ–‡æ¡£ï¼Œè‡ªåŠ¨å¤„ç†ç´¢å¼•ä¸æ£€ç´¢
- **FastGPT**ï¼šå¼€æºçŸ¥è¯†åº“å¹³å°ï¼Œå¯è§†åŒ–é…ç½®RAGæµç¨‹
- **GitHubæ¨¡æ¿**ï¼šå¦‚"TinyRAG"é¡¹ç›®[^6]ï¼Œæä¾›å®Œæ•´ä»£ç 

### 3.4 è¿›é˜¶è°ƒä¼˜æ–¹å‘

**è¯„ä¼°æŒ‡æ ‡**
```
æ£€ç´¢è´¨é‡ï¼šä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼ˆContext Relevanceï¼‰
ç”Ÿæˆè´¨é‡ï¼šç­”æ¡ˆå¿ å®åº¦ï¼ˆFaithfulnessï¼‰ã€äº‹å®å‡†ç¡®æ€§
```

**æ€§èƒ½ä¼˜åŒ–**
```
ç´¢å¼•åˆ†å±‚ï¼šå¯¹é«˜é¢‘æ•°æ®å¯ç”¨ç¼“å­˜æœºåˆ¶
å¤šæ¨¡æ€æ‰©å±•ï¼šæ”¯æŒå›¾åƒ/è¡¨æ ¼æ£€ç´¢
```

> RAGæŠ€æœ¯ä»åœ¨å¿«é€Ÿå‘å±•ä¸­ï¼Œå¯ä»¥æŒç»­å…³æ³¨å­¦æœ¯å’Œå·¥ä¸šç•Œçš„æœ€æ–°è¿›å±•ï¼

## å‚è€ƒæ–‡çŒ®

[^1]: [Genesis, J. (2025). *Retrieval-Augmented Text Generation: Methods, Challenges, and Applications*](https://www.researchgate.net/publication/391141346_Retrieval-Augmented_Generation_Methods_Applications_and_Challenges).
[^2]: [Gao et al. (2023). *Retrieval-Augmented Generation for Large Language Models: A Survey*](https://arxiv.org/abs/2312.10997).
[^3]: [Lewis et al. (2020). *Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks*. NeurIPS.](https://arxiv.org/abs/2005.11401)
[^4]: [Gao et al. (2024). *Modular RAG: Transforming RAG Systems into LEGO-like Reconfigurable Frameworks*](https://arxiv.org/abs/2407.21059).
[^5]: [Martin, T. (2024). *RAG: Why Does It Matter, What Is It, and Does It Guarantee Accuracy?*](https://www.lawdroidmanifesto.com/p/rag-why-does-it-matter-what-is-it).
[^6]: [*TinyRAG: GitHubé¡¹ç›®*](https://github.com/KMnO4-zx/TinyRAG). 